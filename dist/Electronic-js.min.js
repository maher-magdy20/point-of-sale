"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}var Order=function(){function t(){_classCallCheck(this,t),this._menu=[],this._previousSales=[],this._invoiceNumber="",this._order=[],this._payment={amountPaid:0,type:"",changeTip:0}}return _createClass(t,[{key:"generateInvoiceNumber",value:function(){if(this.previousSales.length<1||null==this.previousSales)this.invoiceNumber=1;else{var t=this.previousSales.map(function(t){return t[1]}).reduce(function(t,e){return Math.max(t,e)});this.invoiceNumber=t+1}}},{key:"addOrderLine",value:function(t,e){var n={},i=JSON.parse(e);n.sku=i.sku,n.description=i.description,n.quantity=t,n.price=Utilities.roundToTwo(parseFloat(i.price)),n.subtotal=n.quantity*n.price,n.tax=Utilities.roundToTwo(i.taxRate*n.subtotal),this.order.push(n),Ui.receiptDetails(this)}},{key:"deleteOrderLine",value:function(t){this.order.splice(t,1),Ui.receiptDetails(this)}},{key:"clearOrder",value:function(){this.order=[],Ui.receiptDetails(this)}},{key:"getSummary",value:function(){var e={subtotal:0,tax:0,grandtotal:0};return this.order.forEach(function(t){e.subtotal+=t.subtotal,e.tax+=t.tax}),e.grandtotal=e.subtotal+e.tax,e}},{key:"changePayment",value:function(t){var e=this.getSummary().grandtotal;null!=t.amountPaid&&(this.payment.amountPaid=parseFloat(t.amountPaid)),null!=t.type&&(this.payment.type=t.type),this.payment.amountPaid>=e?(this.payment.changeTip=this.payment.amountPaid-e,Ui.closeButton(!1)):(this.payment.changeTip=0,Ui.closeButton(!0)),Ui.paymentSummary(this)}},{key:"clearPayment",value:function(){this.payment={amountPaid:0,type:"",changeTip:0},Ui.paymentSummary(this)}},{key:"exportOrder",value:function(n){var i=this,a=[];return this.order.forEach(function(t){var e=[];e[0]=n,e[1]=i.invoiceNumber,e[2]=t.sku,e[3]=t.quantity,e[4]=t.price,e[5]=t.tax,a.push(e),i.previousSales.push(e)}),a}},{key:"exportPayment",value:function(t){var e=[[]],n=Utilities.roundToTwo(this.payment.amountPaid-this.getSummary().grandtotal);return e[0][0]=t,e[0][1]=this.invoiceNumber,e[0][2]=this.getSummary().grandtotal,e[0][3]=this.payment.type,"cash"==this.payment.type?e[0][4]=0:e[0][4]=n,e}},{key:"closeSale",value:function(){var t=new Date,e={order:this.exportOrder(t),payment:this.exportPayment(t)};Ui.hidePaypad(this),this.clearPayment(),this.clearOrder(),Ui.invoiceNumber(this),google.script.run.setData(JSON.stringify(e))}},{key:"menu",get:function(){return this._menu},set:function(t){var n=this;this._menu=[],t.forEach(function(t){var e={};e.sku=t[0],e.description=t[1],e.price=t[2],e.taxRate=t[3],e.image=t[4],n._menu.push(e)})}},{key:"previousSales",get:function(){return this._previousSales},set:function(t){this._previousSales=t}},{key:"invoiceNumber",get:function(){return this._invoiceNumber},set:function(t){this._invoiceNumber=t.toString()}},{key:"order",get:function(){return this._order},set:function(t){this._order=t}},{key:"payment",get:function(){return this._payment},set:function(t){this._payment=t}}]),t}(),Ui=function(){function t(){_classCallCheck(this,t)}return _createClass(t,null,[{key:"menu",value:function(e){var a=document.createDocumentFragment();e.menu.forEach(function(t){var e='<img src="'.concat(t.image,'\'" alt="').concat(t.description,'" class="menu-img" style="width:150px;">\n          <figcaption>').concat(t.description,"</figcaption>\n          <figcaption>").concat(Utilities.convertFloatToString(t.price),"</figcaption>"),n=document.createElement("figure");n.className="menu-item";var i=JSON.stringify({sku:"".concat(t.sku),description:"".concat(t.description),price:"".concat(t.price),taxRate:"".concat(t.taxRate)});n.setAttribute("data-sku",i),n.innerHTML=e,a.appendChild(n)}),document.getElementById("menu").appendChild(a),document.querySelectorAll(".menu-item").forEach(function(t){t.addEventListener("click",function(){e.addOrderLine(1,t.getAttribute("data-sku"))})})}},{key:"receiptDetails",value:function(e){var a=document.createDocumentFragment();e.order.forEach(function(t,e){var n='<td class="description">'.concat(t.description,'</td>\n          <td class="quantity">').concat(t.quantity,'</td>\n          <td class="price">').concat(Utilities.convertFloatToString(t.price),'</td>\n          <td class="subtotal">').concat(Utilities.convertFloatToString(t.subtotal),'</td>\n          <td class="delete" data-delete="').concat(e.toString(),'"><i class="fas fa-backspace"></i></td>'),i=document.createElement("tr");i.setAttribute("data-index","".concat(e.toString())),i.innerHTML=n,a.appendChild(i)});for(var t=document.getElementById("receipt-details");t.hasChildNodes();)t.removeChild(t.childNodes[0]);t.appendChild(a),this.summary(e),document.querySelectorAll(".delete").forEach(function(t){t.addEventListener("click",function(){e.deleteOrderLine(parseInt(t.getAttribute("data-delete")))})})}},{key:"invoiceNumber",value:function(t){t.generateInvoiceNumber();var e=t.invoiceNumber;document.getElementById("invoice-number").textContent="Invoice# ".concat(e)}},{key:"summary",value:function(t){var e=t.getSummary(),n=document.getElementById("subtotal-summary"),i=document.getElementById("tax-summary"),a=document.getElementById("grandtotal-summary");n.textContent=Utilities.convertFloatToString(e.subtotal),i.textContent=Utilities.convertFloatToString(e.tax),a.textContent=Utilities.convertFloatToString(e.grandtotal)}},{key:"showPaypad",value:function(){document.getElementById("payment-overlay").style.display="grid"}},{key:"hidePaypad",value:function(){document.getElementById("payment-overlay").style.display="none"}},{key:"paymentSummary",value:function(t){document.getElementById("amount-paid").textContent=Utilities.convertFloatToString(t.payment.amountPaid);var e=document.getElementById("tip-change-title"),n=document.getElementById("payment-type");"credit"===t.payment.type?(e.textContent="Tip:",n.textContent="CC"):"cash"===t.payment.type?(e.textContent="Change:",n.textContent="Cash"):(e.textContent="Change:",n.textContent=""),document.getElementById("tip-change-value").textContent=Utilities.convertFloatToString(t.payment.changeTip)}},{key:"closeButton",value:function(t){var e=document.getElementById("close-sale");e.style.display=t?"none":"grid"}}]),t}(),Utilities=function(){function t(){_classCallCheck(this,t)}return _createClass(t,null,[{key:"convertFloatToString",value:function(t){return t.toLocaleString("en-us",{style:"currency",currency:"EGP"})}},{key:"roundToTwo",value:function(t){return+(Math.round(t+"e+2")+"e-2")}},{key:"paypad",value:function(t,e){isNaN(parseInt(t))?"back"===t?this.backPaypad(e):"clear"===t?this.clearPaypad(e):e.closeSale():this.numberPaypad(parseInt(t),e)}},{key:"numberPaypad",value:function(t,e){var n=this.roundToTwo(.01*t),i=this.roundToTwo(e.payment.amountPaid),a=this.roundToTwo(10*i+n);0===i?e.changePayment({amountPaid:n}):e.changePayment({amountPaid:a})}},{key:"backPaypad",value:function(t){var e=t.payment.amountPaid;if(0<e){var n=.1*(e-100*e%10*.01);t.changePayment({amountPaid:n})}}},{key:"clearPaypad",value:function(t){t.changePayment({amountPaid:0})}}]),t}();document.getElementById("clear-order").addEventListener("click",function(){order.clearOrder()}),document.querySelectorAll(".paypad-show").forEach(function(t){t.addEventListener("click",function(){Ui.showPaypad(order),order.changePayment(JSON.parse(t.getAttribute("data-payment-type")))})}),document.getElementById("paypad-close").addEventListener("click",function(){order.clearPayment(),Ui.hidePaypad(order)}),document.querySelectorAll(".paypad-btn").forEach(function(t){t.addEventListener("click",function(){Utilities.paypad(t.getAttribute("data-id"),order)})});var mockMenuData=[[101,"Arduino UNO",150,.05,"https://i.ibb.co/gFV0bkQ/Arduino-Uno-R3.jpg"],[102,"CNC Arduino Shield",190,.05,"https://i.ibb.co/FKhKRsS/item-XL-22448836-30567955.jpg"],[103,"Board",41,.05,"https://i.ibb.co/Btwwwqp/item-L-11418473-16056016.jpg"],[104,"Wireless-Bluetooth",24.75,.05,"https://i.ibb.co/vZPt14H/1-Pcs-HC-05-Serial-Transceiver-Wireless-Bluetooth-Module-A-Master-slave-Machine-Communication-Power.jpg"],[105,"servo motor",65,.05,"https://i.ibb.co/DMvbKDh/790aaa266116874cc356e870c6408a617386d401.jpg"],[106,"Cable ",32,.05,"https://i.ibb.co/Vjgyn5q/item-XL-7662216-6471727.jpg"],[107,"LCD",51,.05,"https://i.ibb.co/BLjRhDd/item-XL-9149424-9722060.jpg"],[108,"Arduino Starter Kit",1250,.05,"https://i.ibb.co/g3NSb2c/item-XL-23883784-34790529.jpg"],[109,"the car body",252,.05,"https://i.ibb.co/8mnJ8kd/item-XL-10745855-14367601.jpg"],[110,"Heart rate meter",219,.05,"https://i.ibb.co/QKdV5fF/item-XL-9191505-9816650.jpg"],[111,"water pump",115,.05,"https://i.ibb.co/8z44Krr/item-XL-30010046-a54b399419b79.jpg"],[112,"Stepper motor",93,.05,"https://i.ibb.co/2ZWwFvW/item-XL-8425216-1d4f41cce56d0.jpg"],[113,"fingers sensor module",340,.05,"https://i.ibb.co/Vmhzd0H/item-XL-30434816-100786258.jpg"],[114,"Stepper Motor Driver Module",77,.05,"https://i.ibb.co/SwtRsNc/item-XL-122845781-397f712f461e7.jpg"],[115,"motor",67,.05,"https://i.ibb.co/RgpwND3/item-XL-36069756-142165091.jpg"]],mockPreviousSalesData=[["",4999,101,1,10.99,.5495],["",4999,102,2,7.95,.3975],["",4999,103,3,8.96,.45],["",5e3,106,1,6.99,.35],["",5e3,107,1,5.95,.3]],mockPaymentsData=[["",4999,56.46,"cc",5],["",5e3,13.59,"cash",0]],order=new Order;order.menu=mockMenuData,order.previousSales=mockPreviousSalesData,Ui.menu(order);
//# sourceMappingURL=Electronic-js.min.js.map
