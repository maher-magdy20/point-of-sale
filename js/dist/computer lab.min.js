"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}var Order=function(){function t(){_classCallCheck(this,t),this._menu=[],this._previousSales=[],this._invoiceNumber="",this._order=[],this._payment={amountPaid:0,type:"",changeTip:0}}return _createClass(t,[{key:"generateInvoiceNumber",value:function(){if(this.previousSales.length<1||null==this.previousSales)this.invoiceNumber=1;else{var t=this.previousSales.map(function(t){return t[1]}).reduce(function(t,e){return Math.max(t,e)});this.invoiceNumber=t+1}}},{key:"addOrderLine",value:function(t,e){var n={},a=JSON.parse(e);n.sku=a.sku,n.description=a.description,n.quantity=t,n.price=Utilities.roundToTwo(parseFloat(a.price)),n.subtotal=n.quantity*n.price,n.tax=Utilities.roundToTwo(a.taxRate*n.subtotal),this.order.push(n),Ui.receiptDetails(this)}},{key:"deleteOrderLine",value:function(t){this.order.splice(t,1),Ui.receiptDetails(this)}},{key:"clearOrder",value:function(){this.order=[],Ui.receiptDetails(this)}},{key:"getSummary",value:function(){var e={subtotal:0,tax:0,grandtotal:0};return this.order.forEach(function(t){e.subtotal+=t.subtotal,e.tax+=t.tax}),e.grandtotal=e.subtotal+e.tax,e}},{key:"changePayment",value:function(t){var e=this.getSummary().grandtotal;null!=t.amountPaid&&(this.payment.amountPaid=parseFloat(t.amountPaid)),null!=t.type&&(this.payment.type=t.type),this.payment.amountPaid>=e?(this.payment.changeTip=this.payment.amountPaid-e,Ui.closeButton(!1)):(this.payment.changeTip=0,Ui.closeButton(!0)),Ui.paymentSummary(this)}},{key:"clearPayment",value:function(){this.payment={amountPaid:0,type:"",changeTip:0},Ui.paymentSummary(this)}},{key:"exportOrder",value:function(n){var a=this,i=[];return this.order.forEach(function(t){var e=[];e[0]=n,e[1]=a.invoiceNumber,e[2]=t.sku,e[3]=t.quantity,e[4]=t.price,e[5]=t.tax,i.push(e),a.previousSales.push(e)}),i}},{key:"exportPayment",value:function(t){var e=[[]],n=Utilities.roundToTwo(this.payment.amountPaid-this.getSummary().grandtotal);return e[0][0]=t,e[0][1]=this.invoiceNumber,e[0][2]=this.getSummary().grandtotal,e[0][3]=this.payment.type,"cash"==this.payment.type?e[0][4]=0:e[0][4]=n,e}},{key:"closeSale",value:function(){var t=new Date,e={order:this.exportOrder(t),payment:this.exportPayment(t)};Ui.hidePaypad(this),this.clearPayment(),this.clearOrder(),Ui.invoiceNumber(this),google.script.run.setData(JSON.stringify(e))}},{key:"menu",get:function(){return this._menu},set:function(t){var n=this;this._menu=[],t.forEach(function(t){var e={};e.sku=t[0],e.description=t[1],e.price=t[2],e.taxRate=t[3],e.image=t[4],n._menu.push(e)})}},{key:"previousSales",get:function(){return this._previousSales},set:function(t){this._previousSales=t}},{key:"invoiceNumber",get:function(){return this._invoiceNumber},set:function(t){this._invoiceNumber=t.toString()}},{key:"order",get:function(){return this._order},set:function(t){this._order=t}},{key:"payment",get:function(){return this._payment},set:function(t){this._payment=t}}]),t}(),Ui=function(){function t(){_classCallCheck(this,t)}return _createClass(t,null,[{key:"menu",value:function(e){var i=document.createDocumentFragment();e.menu.forEach(function(t){var e='<img src="'.concat(t.image,'\'" alt="').concat(t.description,'" class="menu-img" style="width:150px;">\n            <figcaption>').concat(t.description,"</figcaption>\n            <figcaption>").concat(Utilities.convertFloatToString(t.price),"</figcaption>"),n=document.createElement("figure");n.className="menu-item";var a=JSON.stringify({sku:"".concat(t.sku),description:"".concat(t.description),price:"".concat(t.price),taxRate:"".concat(t.taxRate)});n.setAttribute("data-sku",a),n.innerHTML=e,i.appendChild(n)}),document.getElementById("menu").appendChild(i),document.querySelectorAll(".menu-item").forEach(function(t){t.addEventListener("click",function(){e.addOrderLine(1,t.getAttribute("data-sku"))})})}},{key:"receiptDetails",value:function(e){var i=document.createDocumentFragment();e.order.forEach(function(t,e){var n='<td class="description">'.concat(t.description,'</td>\n            <td class="quantity">').concat(t.quantity,'</td>\n            <td class="price">').concat(Utilities.convertFloatToString(t.price),'</td>\n            <td class="subtotal">').concat(Utilities.convertFloatToString(t.subtotal),'</td>\n            <td class="delete" data-delete="').concat(e.toString(),'"><i class="fas fa-backspace"></i></td>'),a=document.createElement("tr");a.setAttribute("data-index","".concat(e.toString())),a.innerHTML=n,i.appendChild(a)});for(var t=document.getElementById("receipt-details");t.hasChildNodes();)t.removeChild(t.childNodes[0]);t.appendChild(i),this.summary(e),document.querySelectorAll(".delete").forEach(function(t){t.addEventListener("click",function(){e.deleteOrderLine(parseInt(t.getAttribute("data-delete")))})})}},{key:"invoiceNumber",value:function(t){t.generateInvoiceNumber();var e=t.invoiceNumber;document.getElementById("invoice-number").textContent="Invoice# ".concat(e)}},{key:"summary",value:function(t){var e=t.getSummary(),n=document.getElementById("subtotal-summary"),a=document.getElementById("tax-summary"),i=document.getElementById("grandtotal-summary");n.textContent=Utilities.convertFloatToString(e.subtotal),a.textContent=Utilities.convertFloatToString(e.tax),i.textContent=Utilities.convertFloatToString(e.grandtotal)}},{key:"showPaypad",value:function(){document.getElementById("payment-overlay").style.display="grid"}},{key:"hidePaypad",value:function(){document.getElementById("payment-overlay").style.display="none"}},{key:"paymentSummary",value:function(t){document.getElementById("amount-paid").textContent=Utilities.convertFloatToString(t.payment.amountPaid);var e=document.getElementById("tip-change-title"),n=document.getElementById("payment-type");"credit"===t.payment.type?(e.textContent="Tip:",n.textContent="CC"):"cash"===t.payment.type?(e.textContent="Change:",n.textContent="Cash"):(e.textContent="Change:",n.textContent=""),document.getElementById("tip-change-value").textContent=Utilities.convertFloatToString(t.payment.changeTip)}},{key:"closeButton",value:function(t){var e=document.getElementById("close-sale");e.style.display=t?"none":"grid"}}]),t}(),Utilities=function(){function t(){_classCallCheck(this,t)}return _createClass(t,null,[{key:"convertFloatToString",value:function(t){return t.toLocaleString("en-us",{style:"currency",currency:"EGP"})}},{key:"roundToTwo",value:function(t){return+(Math.round(t+"e+2")+"e-2")}},{key:"paypad",value:function(t,e){isNaN(parseInt(t))?"back"===t?this.backPaypad(e):"clear"===t?this.clearPaypad(e):e.closeSale():this.numberPaypad(parseInt(t),e)}},{key:"numberPaypad",value:function(t,e){var n=this.roundToTwo(.01*t),a=this.roundToTwo(e.payment.amountPaid),i=this.roundToTwo(10*a+n);0===a?e.changePayment({amountPaid:n}):e.changePayment({amountPaid:i})}},{key:"backPaypad",value:function(t){var e=t.payment.amountPaid;if(0<e){var n=.1*(e-100*e%10*.01);t.changePayment({amountPaid:n})}}},{key:"clearPaypad",value:function(t){t.changePayment({amountPaid:0})}}]),t}();document.getElementById("clear-order").addEventListener("click",function(){order.clearOrder()}),document.querySelectorAll(".paypad-show").forEach(function(t){t.addEventListener("click",function(){Ui.showPaypad(order),order.changePayment(JSON.parse(t.getAttribute("data-payment-type")))})}),document.getElementById("paypad-close").addEventListener("click",function(){order.clearPayment(),Ui.hidePaypad(order)}),document.querySelectorAll(".paypad-btn").forEach(function(t){t.addEventListener("click",function(){Utilities.paypad(t.getAttribute("data-id"),order)})});var mockMenuData=[[101,"Hard Disk Drive 1TB",750,.05,"https://i.ibb.co/mRbLLYB/1.jpg"],[102,"Hard ssd 128GB",343,.05,"https://i.ibb.co/Rb0jTsL/1-1.jpg"],[103,"Toshiba Battery",333,.05,"https://i.ibb.co/FzqYwQT/1-2.jpg"],[104,"USB sound card adapter",234,.05,"https://i.ibb.co/3YSgc2Q/1-3.jpg"],[105,"Laptop Memory 8GB",690,.05,"https://i.ibb.co/wywBH0P/1-4.jpg"],[106,"Electron cooler",105,.05,"https://i.ibb.co/sWMQ5YD/1-5.jpg"],[107,"A fan for the computer",125,.05,"https://i.ibb.co/tqTWzyP/1-6.jpg"],[108,"External DVD Drive",438,.05,"https://i.ibb.co/D8yTJFR/1-7.jpg"],[109,"Flash Memory 16GB",70,.05,"https://i.ibb.co/fGnKrD1/1-8.jpg"],[110,"Mouse - Black",25,.05,"https://i.ibb.co/QNqGZyz/1-9.jpg"],[111,"Flash Memory 64GB",120,.05,"https://i.ibb.co/Y7xkR98/1-10.jpg"],[112,"memory card Toshiba 32GB",80,.05,"https://i.ibb.co/mBSkkCV/1-11.jpg"],[113,"OTG USB Flash Drive 32GB",425,.05,"https://i.ibb.co/P5yz223/1-12.jpg"],[114,"keyboard",110,.05,"https://i.ibb.co/WyhBnb3/1-13.jpg"],[115,"The Gemming Group",300,.05,"https://i.ibb.co/Zh26fM5/1-14.jpg"]],mockPreviousSalesData=[["",4999,101,1,10.99,.5495],["",4999,102,2,7.95,.3975],["",4999,103,3,8.96,.45],["",5e3,106,1,6.99,.35],["",5e3,107,1,5.95,.3]],mockPaymentsData=[["",4999,56.46,"cc",5],["",5e3,13.59,"cash",0]],order=new Order;order.menu=mockMenuData,order.previousSales=mockPreviousSalesData,Ui.menu(order);
//# sourceMappingURL=computer lab.min.js.map
